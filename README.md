# Shioaji Stock Prices ğŸ“ˆ

![Python](https://img.shields.io/badge/python-3.9%2B-blue)
![Platform](https://img.shields.io/badge/platform-windows%20%7C%20linux-lightgrey)

ä¸€å€‹åŸºæ–¼ [Shioaji API](https://github.com/Sinotrade/Shioaji) çš„å°è‚¡è³‡æ–™è‡ªå‹•åŒ–ä¸‹è¼‰èˆ‡è½‰æª”ç³»çµ±ã€‚
å°ˆæ³¨æ–¼ç©©å®šã€è‡ªå‹•åŒ–çš„æ—¥è³‡æ–™æ›´æ–° (Daily Update Pipeline)ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- **è‡ªå‹•åŒ–ä¸‹è¼‰**ï¼šæ¯æ—¥è‡ªå‹•ä¸‹è¼‰æŒ‡å®šè‚¡ç¥¨æ¸…å–®çš„åˆ†Kè³‡æ–™ (`min.csv`)ã€‚
- **æ™ºæ…§å¢é‡æ›´æ–°**ï¼šè‡ªå‹•åµæ¸¬æœ¬åœ°å·²æœ‰è³‡æ–™ï¼Œåªä¸‹è¼‰ç¼ºå°‘çš„æ—¥æœŸå€é–“ï¼Œç¯€çœæ™‚é–“èˆ‡æµé‡ã€‚
- **è‡ªå‹•è½‰æª”**ï¼šä¸‹è¼‰å®Œæˆå¾Œè‡ªå‹•è½‰æ›ç‚ºæ—¥Kè³‡æ–™ (`day.csv`)ã€‚
- **æµé‡æ§åˆ¶**ï¼šå…§å»º Shioaji API æµé‡ç›£æ§ï¼Œè¶…éä¸Šé™è‡ªå‹•æš«åœã€‚
- **å¼·å¥æ—¥èªŒç³»çµ±**ï¼šæ•´åˆ `Rich` é¡¯ç¤ºèˆ‡å®Œæ•´æ—¥èªŒè¨˜éŒ„ï¼Œæ”¯æ´å¤šé€²ç¨‹å®‰å…¨å¯«å…¥ã€‚

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
shioaji_stock_prices/
â”œâ”€â”€ config/              # è¨­å®šæª”ç›®éŒ„
â”‚   â””â”€â”€ stock_category.json5 # ä¸‹è¼‰æ¨™çš„æ¸…å–®
â”œâ”€â”€ data/                # è³‡æ–™å„²å­˜ç›®éŒ„ (è‡ªå‹•å¿½ç•¥)
â”œâ”€â”€ shp_utils/           # é€šç”¨å·¥å…·åº«
â”‚   â””â”€â”€ user_logger/     # æ—¥èªŒæ¨¡çµ„ (Submodule)
â”œâ”€â”€ download_stock.py    # [æ ¸å¿ƒ] è‚¡ç¥¨ä¸‹è¼‰é‚è¼¯
â”œâ”€â”€ convert_stock_price.py # [æ ¸å¿ƒ] åˆ†Kè½‰æ—¥Ké‚è¼¯
â”œâ”€â”€ run_daily.py         # [å…¥å£] æ¯æ—¥æ’ç¨‹ä¸»ç¨‹å¼
â””â”€â”€ .env                 # ç’°å¢ƒè®Šæ•¸ (API Key)
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
# ä½¿ç”¨ uv (æ¨è–¦)
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -r requirements.txt
```

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

è«‹è¤‡è£½ `.env.example` ç‚º `.env` ä¸¦å¡«å…¥æ‚¨çš„ Shioaji API è³‡è¨Šï¼š

```ini
API_KEY=your_api_key_here
SECRET_KEY=your_secret_key_here
```

### 3. ä¸‹è¼‰æ¸…å–®éæ¿¾

`data/stock_category.json5` å®šç¾©äº†è‚¡ç¥¨é¡åˆ¥ä»£ç¢¼å°ç…§è¡¨ã€‚
ç¨‹å¼æœƒè®€å–æ­¤æª”æ¡ˆï¼Œè‡ªå‹•éæ¿¾æ‰è¢«æ¨™è¨˜ç‚º **"æœŸæ¬Š"** çš„é¡åˆ¥ï¼Œåªä¸‹è¼‰è‚¡ç¥¨ã€‚

### 4. åŸ·è¡Œæ¯æ—¥æ›´æ–°

```bash
python run_daily.py
```

## ğŸ›  è‡ªå‹•åŒ–æ’ç¨‹ (Windows)

å»ºè­°ä½¿ç”¨ Windows Task Scheduler è¨­å®šæ¯æ—¥ä¸‹åˆ (å¦‚ 15:00) è‡ªå‹•åŸ·è¡Œ `run_daily.py`ã€‚

## ğŸ“ License

æœ¬å°ˆæ¡ˆæ¡ç”¨ Apache License 2.0ã€‚